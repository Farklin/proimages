{% extends 'base.html' %}

{% block content %}



<div class="container p-5">
    
    <p>
        Для добавления дополнительных полей нужно перейти на страницу настройки. <br> 
        Не рекомендуется жать 1 млн раз на кнопке если что то не сработало.  <br> 
        Сайт не несет ответственность за истребление всего человечества и действия третьих лиц.  <br> 
    
    </p> 
    
        <a class='btn btn-primary' href="{% url 'registration:create_catalog' %}"> Создать каталог </a> 
        <a class='btn btn-success' href="{% url 'registration:create_company' %}"> Создать компанию </a> 
        
    </div>

    <div class="container p-5">
        <div class="row">

            <div class="col-sm-6">
                <h3> Каталоги </h3> 
                <table class="table table-hover">
                
               
                {% for catalog in context.catalog %}
                <tr> 
                    <td> 
                        <div class="row">
                            <div class="col-sm-10"> 
                                <a href="{% url 'registration:create_field_catalog' catalog.id %}" class="w-25"> {{catalog.url|truncatechars:40}} </a>
                            </div>
                            <div class="col-sm-2"> 
                                <input class="checkStatusCatalog form-check-input p-0" value ='{% url "registration:status_catalog" catalog.id  %}'  {% if catalog.status %} checked  {% endif %}  type="checkbox"> </a> 
                            </div>
                        </div>
                    </td>
                </tr> 
                {% endfor %} 
                
                </table>

            </div>
            <div class="col-sm-6">
                 <h3> Компании </h3> 
                 <table class="table table-hover">
                 {% for company in context.company %}
                <tr> 
                    <td class="row"> 
                        <div class="col-md-8">
                            <a href="{% url 'registration:view_company' company.id %}"> {{company.name_firm}} </a>    
                        </div>
                        <div class="col-md-4">
                            <a class="text-danger" href="{% url 'registration:delete_company' company.id %}"> Ликвидация </a>
                        </div>

                       
                    </td>
                </tr> 
                {% endfor %} 
                
                </table>
            </div>
        </div>
       
    </div>


<script> 
    

$('.checkStatusCatalog').click(function(){
    $.ajax({
        url: $(this).val(),
        method: 'GET',
    })
}); 
    
</script>

{% endblock %}